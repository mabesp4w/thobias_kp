import{e as j,f as g,aO as h,r,j as s,Y as x,T as y,i as c,B as N,aN as b}from"./app-CSgTi1V-.js";import w from"./DetailProdct-l88jrVzS.js";import C from"./Question-BGTixbY5.js";import"./ScrollRevealComponent-DtYkaQEz.js";import"./addToCart-CspCCCLQ.js";import"./Orders-Bqfw1Kuz.js";const S=j(g(n=>({dtShippingCosts:[],setShippingCosts:async()=>{try{const a=await h({method:"get",url:"/shippingCosts"});return n(e=>({...e,dtShippingCosts:a.data.data})),{status:"berhasil",data:a.data}}catch(a){return{status:"error",error:a.response.data}}},setShowShippingCosts:async a=>{try{const e=await h({method:"get",url:`/shippingCosts/${a}`});return n(l=>({...l,showSippingCost:e.data.data})),{status:"berhasil",data:e.data}}catch(e){return{status:"error",error:e.response.data}}}}))),T=({carts:n,MIDTRANS_CLIENT_KEY:a})=>{var p;const[e,l]=r.useState(),[m,d]=r.useState(!1),{setShowShippingCosts:u,showSippingCost:o}=S(),f=async()=>{const t=await b.get("/status");l(t.data.user)};return r.useEffect(()=>(f(),()=>{}),[]),r.useEffect(()=>{var t,i;e!=null&&e.user_info&&((t=e==null?void 0:e.user_info)==null?void 0:t.length)>0&&u((i=e==null?void 0:e.user_info[0])==null?void 0:i.village_id)},[e]),!(e!=null&&e.user_info)||((p=e==null?void 0:e.user_info)==null?void 0:p.length)===0?s.jsxs(s.Fragment,{children:[s.jsx(x,{title:"Checkout"}),s.jsx("div",{className:"flex items-center justify-center h-fulls w-full",children:s.jsx("h1",{className:"text-2xl text-primary",children:"Silahkan melengkapi data untuk lanjut ke checkout"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(x,{title:"Checkout"}),s.jsx(y,{}),s.jsx(C,{openDialog:m,setOpenDialog:d,shipping:o,carts:n,user:e,MIDTRANS_CLIENT_KEY:a}),s.jsxs("section",{className:"container mt-10 flex flex-col gap-y-10",children:[s.jsx("h1",{className:"text-center text-2xl font-bold",children:"Checkout"}),s.jsxs("div",{className:"flex mx-auto w-full justify-center gap-x-3",children:[s.jsx("div",{className:"flex flex-col gap-y-6",children:n.map(t=>s.jsx(w,{product:t.product,cart:t},t.id))}),s.jsx("div",{className:"w-[20rem]",children:s.jsxs("div",{className:"flex flex-col gap-y-4 w-full",children:[s.jsxs("div",{className:"flex justify-between grow",children:[s.jsx("span",{className:"font-semibold",children:"Subtotal"}),s.jsx("span",{className:"font-semibold",children:c(n.reduce((t,i)=>t+i.product.price*i.quantity,0))})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Ongkir"}),o&&s.jsx("span",{className:"font-semibold",children:c(o.shipping_cost)})]}),o&&s.jsxs("div",{className:"flex justify-between text-primary",children:[s.jsx("span",{className:"font-semibold",children:"Total"}),s.jsx("span",{className:"font-semibold",children:c(o.shipping_cost+n.reduce((t,i)=>t+i.product.price*i.quantity,0))})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(N,{className:"font-semibold bg-secondary",onClick:()=>d(!0),children:"Pembayaran"})})]})})]})]})]})};export{T as default};
