import{r as d,j as e,a as T,I as $}from"./app-DGFkG_vZ.js";import{R as C}from"./index-DhxpWw7Y.js";const P=({label:r,register:c,required:i,name:l,errors:a,addClass:N,accept:R,setValue:b,fileEdit:g,initialValue:y,watch:k,size:j="md",labelCss:F="text-gray-700"})=>{const[_,z]=d.useState(""),[h,p]=d.useState([y||""]),f=k(l);d.useEffect(()=>{f||p([])},[f]);const S=s=>new Promise(t=>{var o;const u=j==="sm"?500:j==="md"?1e3:1600;if(s){const n=((o=s==null?void 0:s.type)==null?void 0:o.split("/"))||[];n[0]!=="image"?t(s):C.imageFileResizer(s,u,u,n[1],100,0,x=>{t(x)},"file")}else t(null)}),A=async s=>{const t=Array.from(s),o=(await Promise.all(t.map(S))).map(n=>{var w;const m=new FileReader;m.readAsDataURL(n),m.onloadend=()=>{p(I=>[...I,m.result])};const x=((w=n==null?void 0:n.type)==null?void 0:w.split("/"))||[];return z(x[0]),n});b(l,o)};return e.jsxs("div",{className:N,children:[r&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:`text-sm font-medium tracking-wide ${F}`,children:r}),i&&e.jsx("span",{className:"ml-1 text-red-600",children:"*"}),!i&&e.jsx("span",{className:`text-sm font-medium tracking-wide ${F}`,children:"(Optional)"})]}),e.jsx("input",{className:"w-full text-base px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-secondary",id:"fileInput",type:"file",accept:R,multiple:!y,onChange:s=>{const t=s.target.files;t&&A(t)},onClick:()=>{p([])}}),e.jsx("input",{type:"hidden",id:r,...c(l,{required:i})}),e.jsxs("div",{className:"flex gap-4 mt-2 flex-wrap",children:[h&&h.map((s,t)=>_==="image"?e.jsx("img",{className:"rounded-lg w-36",src:s,alt:""},t):e.jsxs("p",{children:["File: ",s.name]},t)),g&&g.map((s,t)=>e.jsx("div",{children:e.jsx("img",{src:`${T}/${s}`,className:"rounded-lg w-24",alt:""})},t))]}),(a==null?void 0:a.type)==="required"&&e.jsxs("p",{className:"text-red-500 font-inter italic text-sm",children:[r," tidak boleh kosong"]})]})},L=({register:r,errors:c,setValue:i,watch:l,dtEdit:a})=>e.jsxs(e.Fragment,{children:[e.jsx($,{label:"Posisi",name:"position",register:r,required:!0,type:"number",min:1,errors:c.position,addClass:"col-span-8"}),e.jsx(P,{label:"Gambar",name:"product_img",register:r,addClass:"col-span-8",setValue:i,required:!(a!=null&&a.product_img),errors:c.product_img,fileEdit:[a==null?void 0:a.product_img],initialValue:(a==null?void 0:a.product_img)||"",watch:l,accept:"image/*"})]});export{L as default};
