import{r as x,j as e,aK as y,aL as b,g as v,u as L,aM as d,I as S,L as E,c as P}from"./app-CSgTi1V-.js";const I=({label:a,register:m,required:p,name:n,minLength:o,maxLength:u,errors:t,valueAsNumber:h,type:l="password",readOnly:f,placeholder:w,autoComplete:j="on",addClass:r,value:s})=>{const[i,c]=x.useState(!1),g=()=>{c(!i)};return e.jsxs("div",{className:r,children:[e.jsx("label",{htmlFor:n,className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),p&&e.jsx("span",{className:"ml-1 text-red-600",children:"*"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-third",type:l==="password"?i?"text":"password":l,id:n,readOnly:f,placeholder:w,autoComplete:j,...m(n,{required:p,minLength:o,maxLength:u,valueAsNumber:h}),value:s}),l==="password"&&e.jsx("div",{className:"absolute right-2 top-0 flex items-center h-full cursor-pointer text-third",onClick:g,children:i?e.jsx(y,{size:20}):e.jsx(b,{size:20})})]}),(t==null?void 0:t.type)==="required"&&e.jsxs("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kosong"]}),(t==null?void 0:t.type)==="minLength"&&e.jsxs("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kurang dari ",o," karakter"]}),(t==null?void 0:t.type)==="maxLength"&&e.jsxs("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh lebih dari ",u," karakter"]}),(t==null?void 0:t.type)==="pattern"&&e.jsxs("p",{className:"text-red-500 font-inter italic text-sm",children:[a," hanya boleh angka."]})]})},B=()=>{const{setLogin:a,cekToken:m}=v(),p=window.location.pathname,[n,o]=x.useState(""),[u,t]=x.useState(!1),{register:h,handleSubmit:l,formState:{errors:f}}=L(),w=x.useCallback(async()=>{const r=d.get("token");if(d.get("role"),r){const s=await m();if(!(s!=null&&s.error))return window.location.href="/admin"}t(!1)},[m,p]);x.useEffect(()=>{typeof window<"u"&&w()},[w]);const j=async r=>{var i;t(!0),o("");const s=await a(r);if(s!=null&&s.error)console.log(s==null?void 0:s.error),o((i=s==null?void 0:s.error)==null?void 0:i.message);else{const{data:c}=s,g=c.token,k=c.role,N=c.user;return d.set("token",g),d.set("role",k),d.set("user",JSON.stringify(N)),window.location.href="/admin"}t(!1)};return e.jsxs("div",{className:"px-5 py-2 text-lg",children:[n&&e.jsx("p",{className:"text-red-600 text-center",children:n}),e.jsxs("form",{action:"",children:[e.jsx("div",{className:"pb-2 pt-4",children:e.jsx(S,{label:"Email",register:h,type:"text",name:"email",placeholder:"Email",required:!0,errors:f.email,className:"text-lg"})}),e.jsx("div",{className:"pb-2 pt-4",children:e.jsx(I,{name:"password",label:"Password",placeholder:"Password",register:h,required:!0,errors:f.password})}),e.jsx("div",{className:"mt-5",children:u?e.jsx(E,{}):e.jsxs(P,{onClick:l(j),type:"submit",children:[e.jsx("span",{className:"inline-block mr-2",children:"Login"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-4 h-4 inline-block",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})]})};export{B as default};
