import{ah as D,r as d,at as G,j as a,au as B,ac as v,ak as h,ai as z,O as T,e as K,f as H,aO as x,g as q,Y as U}from"./app-DTygMt2q.js";import{c as C,u as Y,R as J,I as Q}from"./index-CUWhGg6f.js";import w from"./History-CKePPk_q.js";import W from"./Tunggu-BWDqjD0M.js";import"./Penilaian-ClkLmFom.js";import"./RatingStars-8aV3-3TF.js";import"./Reviews-Dw-6p1GX.js";import"./DetailsOrder-DGKKqY2P.js";import"./ScrollRevealComponent-DPoyZAeo.js";import"./Orders-Bs8JYhNs.js";var y="Tabs",[X,me]=D(y,[C]),S=C(),[Z,j]=X(y),A=d.forwardRef((s,t)=>{const{__scopeTabs:e,value:n,onValueChange:c,defaultValue:u,orientation:o="horizontal",dir:i,activationMode:m="automatic",...r}=s,p=Y(i),[l,f]=G({prop:n,onChange:c,defaultProp:u});return a.jsx(Z,{scope:e,baseId:B(),value:l,onValueChange:f,orientation:o,dir:p,activationMode:m,children:a.jsx(v.div,{dir:p,"data-orientation":o,...r,ref:t})})});A.displayName=y;var E="TabsList",I=d.forwardRef((s,t)=>{const{__scopeTabs:e,loop:n=!0,...c}=s,u=j(E,e),o=S(e);return a.jsx(J,{asChild:!0,...o,orientation:u.orientation,dir:u.dir,loop:n,children:a.jsx(v.div,{role:"tablist","aria-orientation":u.orientation,...c,ref:t})})});I.displayName=E;var R="TabsTrigger",k=d.forwardRef((s,t)=>{const{__scopeTabs:e,value:n,disabled:c=!1,...u}=s,o=j(R,e),i=S(e),m=$(o.baseId,n),r=M(o.baseId,n),p=n===o.value;return a.jsx(Q,{asChild:!0,...i,focusable:!c,active:p,children:a.jsx(v.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":r,"data-state":p?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:m,...u,ref:t,onMouseDown:h(s.onMouseDown,l=>{!c&&l.button===0&&l.ctrlKey===!1?o.onValueChange(n):l.preventDefault()}),onKeyDown:h(s.onKeyDown,l=>{[" ","Enter"].includes(l.key)&&o.onValueChange(n)}),onFocus:h(s.onFocus,()=>{const l=o.activationMode!=="manual";!p&&!c&&l&&o.onValueChange(n)})})})});k.displayName=R;var O="TabsContent",_=d.forwardRef((s,t)=>{const{__scopeTabs:e,value:n,forceMount:c,children:u,...o}=s,i=j(O,e),m=$(i.baseId,n),r=M(i.baseId,n),p=n===i.value,l=d.useRef(p);return d.useEffect(()=>{const f=requestAnimationFrame(()=>l.current=!1);return()=>cancelAnimationFrame(f)},[]),a.jsx(z,{present:c||p,children:({present:f})=>a.jsx(v.div,{"data-state":p?"active":"inactive","data-orientation":i.orientation,role:"tabpanel","aria-labelledby":m,hidden:!f,id:r,tabIndex:0,...o,ref:t,style:{...s.style,animationDuration:l.current?"0s":void 0},children:f&&u})})});_.displayName=O;function $(s,t){return`${s}-trigger-${t}`}function M(s,t){return`${s}-content-${t}`}var ee=A,P=I,F=k,L=_;const ae=ee,V=d.forwardRef(({className:s,...t},e)=>a.jsx(P,{ref:e,className:T("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...t}));V.displayName=P.displayName;const g=d.forwardRef(({className:s,...t},e)=>a.jsx(F,{ref:e,className:T("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...t}));g.displayName=F.displayName;const b=d.forwardRef(({className:s,...t},e)=>a.jsx(L,{ref:e,className:T("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));b.displayName=L.displayName;const N=async()=>await q.getState().setToken(),te=K(H(s=>({dtOrders:[],setOrders:async()=>{try{const t=await x({method:"get",url:"/orders",headers:{Authorization:`Bearer ${await N()}`}});return s(e=>({...e,dtOrders:t.data})),{status:"berhasil",data:t.data}}catch(t){return{status:"error",error:t.response.data}}},setOrdersAll:async t=>{try{const e=await x({method:"get",url:"/orders/all",headers:{Authorization:`Bearer ${await N()}`},params:t});return s(n=>({...n,dtOrders:e.data.data})),{status:"berhasil",data:e.data}}catch(e){return console.log({error:e}),{status:"error",error:e.response.data}}},setShowOrders:async t=>{try{const e=await x({method:"get",url:`/orders/${t}`});return s(n=>({...n,showOrder:e.data.data})),{status:"berhasil",data:e.data}}catch(e){return{status:"error",error:e.response.data}}}}))),fe=({MIDTRANS_CLIENT_KEY:s,user:t})=>{const[e,n]=d.useState("tunggu"),[c,u]=d.useState(!1),{setOrdersAll:o,dtOrders:i}=te();d.useEffect(()=>{window.dispatchEvent(new Event("cartUpdated"))},[]),d.useEffect(()=>{const r=document.createElement("script");return r.src="https://app.sandbox.midtrans.com/snap/snap.js",r.setAttribute("data-client-key",s||""),r.onload=()=>u(!0),document.body.appendChild(r),()=>{document.body.removeChild(r)}},[]);const m=async r=>{await o({status:r,user_id:t.id})};return d.useEffect(()=>{m(e)},[]),a.jsxs("main",{className:"container mt-10",children:[a.jsx(U,{title:"Orders"}),a.jsxs(ae,{defaultValue:"tunggu",onValueChange:m,className:"w-full",children:[a.jsxs(V,{children:[a.jsx(g,{value:"tunggu",children:"Tunggu"}),a.jsx(g,{value:"selesai,dibayar,dikirim",children:"Selesai"}),a.jsx(g,{value:"expired",children:"Batal"})]}),a.jsx(b,{value:"tunggu",children:i.length>0?i.map(r=>a.jsx(W,{order:r,snapLoaded:!0},r.id)):a.jsx("section",{className:"container mt-10",children:a.jsx("h1",{className:"text-center font-bold",children:"Tidak ada pesanan"})})}),a.jsx(b,{value:"selesai,dibayar,dikirim",children:i.length>0?i.map(r=>a.jsx(w,{order:r},r.id)):a.jsx("section",{className:"container mt-10",children:a.jsx("h1",{className:"text-center font-bold",children:"Tidak ada pesanan"})})}),a.jsx(b,{value:"expired",children:i.length>0?i.map(r=>a.jsx(w,{order:r},r.id)):a.jsx("section",{className:"container mt-10",children:a.jsx("h1",{className:"text-center font-bold",children:"Tidak ada pesanan"})})})]})]})};export{fe as default};
