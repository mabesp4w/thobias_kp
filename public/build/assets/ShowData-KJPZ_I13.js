import{aF as C,r as s,j as a,L as I}from"./app-DTygMt2q.js";import{_,D as E,g as F}from"./generateColumns-BEYFbkEN.js";import{t as v}from"./transformDataWithFilters-CxGA706_.js";import{updateAccessorKeys as B,columnsConfig as P}from"./columnsConfig-CD6Ku_JK.js";import{u as N}from"./ProductImages-BfSDUX60.js";import{l as R,L as k}from"./lightImgDB-B_jtKaba.js";import"./index-CUWhGg6f.js";const z=({setDelete:f,setEdit:p})=>{const{product_id:h}=C().props,{setProductImages:d,dtProductImages:t}=N(),[o,x]=s.useState(10),[g,w]=s.useState(!0),[S,m]=s.useState(-1),[j,L]=s.useState(),i=new URLSearchParams(window.location.search),r=i.get("cari")||"",n=i.get("sortby")||"",c=i.get("order")||"",u=_.debounce(e=>{e()},500),D=s.useCallback(async()=>{x(10),await d({limit:o,search:r,sortby:n,order:c,product_id:h}),w(!1)},[d,o,r,n,c]);s.useEffect(()=>(u(D),()=>{u.cancel()}),[r,n,c,o]),s.useEffect(()=>{L(R({data:t==null?void 0:t.data,picture:"product_img",title:{path:"position"},description:{path:""},width:3840,height:5760}))},[t==null?void 0:t.data]);const l=["position"],b=v(t.data,l),y=B(P({setIndexBox:m}),l);return a.jsxs("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:[a.jsx(k,{index:S,setIndex:m,slides:j}),g?a.jsx("div",{className:"flex justify-center items-center h-full",children:a.jsx(I,{})}):a.jsx(E,{data:b,columns:F(y,p,e=>f({id:e,isDelete:!1})),filters:l.map(e=>`${e.split(".").join("_")}_filter`)})]})};export{z as default};
