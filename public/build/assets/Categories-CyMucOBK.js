import{e as h,f as p,g as n,h as i}from"./app-DTygMt2q.js";const C=h(p(d=>({dtCategories:{last_page:0,current_page:0,data:[]},setCategories:async({page:r=1,limit:t=10,search:e,sortby:a,order:s})=>{var o;try{const g=await n.getState().setToken(),u=await i({method:"get",url:"/categories",headers:{Authorization:`Bearer ${g}`},params:{limit:t,page:r,search:e,sortby:a,order:s}});return d(c=>({...c,dtCategories:u.data})),console.log({response:u}),{status:"berhasil",data:u.data}}catch(g){return{status:"error",error:(o=g.response)==null?void 0:o.data}}},setShowCategories:async r=>{var t;try{const e=await n.getState().setToken(),a=await i({method:"get",url:`/categories/${r}`,headers:{Authorization:`Bearer ${e}`}});return d(s=>({...s,dtCategories:a.data.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:(t=e.response)==null?void 0:t.data}}},addData:async r=>{try{const t=await n.getState().setToken(),e=await i({method:"post",url:"/categories",headers:{Authorization:`Bearer ${t}`},data:r});return d(a=>({dtCategories:{last_page:a.dtCategories.last_page,current_page:a.dtCategories.current_page,data:[e.data.data,...a.dtCategories.data]}})),{status:"berhasil tambah",data:e.data}}catch(t){return{status:"error",data:t.response.data}}},removeData:async r=>{try{const t=await n.getState().setToken(),e=await i({method:"delete",url:`/categories/${r}`,headers:{Authorization:`Bearer ${t}`}});return d(a=>({dtCategories:{last_page:a.dtCategories.last_page,current_page:a.dtCategories.current_page,data:a.dtCategories.data.filter(s=>s.id!==r)}})),{status:"berhasil hapus",data:e.data}}catch(t){return{status:"error",data:t.response.data}}},updateData:async(r,t)=>{try{const e=await n.getState().setToken(),a=await i({method:"PUT",url:`/categories/${r}`,headers:{Authorization:`Bearer ${e}`},data:t});return d(s=>({dtCategories:{last_page:s.dtCategories.last_page,current_page:s.dtCategories.current_page,data:s.dtCategories.data.map(o=>o.id===r?{...o,...a.data.data}:o)}})),{status:"berhasil update",data:a.data}}catch(e){return{status:"error",data:e.response.data}}}})));export{C as u};
