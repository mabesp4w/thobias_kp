import{e as i,f as g,g as u,h as n}from"./app-CnHTP8XK.js";const P=i(g(d=>({dtProducts:{last_page:0,current_page:0,data:[]},setProducts:async({page:e=1,limit:a=10,search:r,sortby:t,order:s})=>{var o;try{const c=await u.getState().setToken(),h=await n({method:"get",url:"/products",headers:{Authorization:`Bearer ${c}`},params:{limit:a,page:e,search:r,sortby:t,order:s}});return d(p=>({...p,dtProducts:h.data})),console.log({response:h}),{status:"berhasil",data:h.data}}catch(c){return{status:"error",error:(o=c.response)==null?void 0:o.data}}},setShowProducts:async e=>{var a;try{const r=await u.getState().setToken(),t=await n({method:"get",url:`/products/${e}`,headers:{Authorization:`Bearer ${r}`}});return d(s=>({...s,showProduct:t.data.data})),{status:"berhasil",data:t.data}}catch(r){return{status:"error",error:(a=r.response)==null?void 0:a.data}}},addData:async e=>{try{const a=await u.getState().setToken(),r=await n({method:"post",url:"/products",headers:{Authorization:`Bearer ${a}`},data:e});return d(t=>({dtProducts:{last_page:t.dtProducts.last_page,current_page:t.dtProducts.current_page,data:[r.data.data,...t.dtProducts.data]}})),{status:"berhasil tambah",data:r.data}}catch(a){return{status:"error",data:a.response.data}}},removeData:async e=>{try{const a=await u.getState().setToken(),r=await n({method:"delete",url:`/products/${e}`,headers:{Authorization:`Bearer ${a}`}});return d(t=>({dtProducts:{last_page:t.dtProducts.last_page,current_page:t.dtProducts.current_page,data:t.dtProducts.data.filter(s=>s.id!==e)}})),{status:"berhasil hapus",data:r.data}}catch(a){return{status:"error",data:a.response.data}}},updateData:async(e,a)=>{try{const r=await u.getState().setToken(),t=await n({method:"PUT",url:`/products/${e}`,headers:{Authorization:`Bearer ${r}`},data:a});return d(s=>({dtProducts:{last_page:s.dtProducts.last_page,current_page:s.dtProducts.current_page,data:s.dtProducts.data.map(o=>o.id===e?{...o,...t.data.data}:o)}})),{status:"berhasil update",data:t.data}}catch(r){return{status:"error",data:r.response.data}}}})));export{P as u};
