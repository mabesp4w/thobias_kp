import{r as n,j as t,aI as S,a as _,B as L,i as z,aP as W,aQ as I,aN as P}from"./app-DTygMt2q.js";import{u as R}from"./keen-slider.min-DUmsAUT6.js";/* empty css              */import{C as T,a as B,b as $}from"./card-BlXfqeVC.js";import{a as F}from"./addToCart-DE2p-oID.js";const U=()=>{const[r,c]=n.useState(window.innerWidth);return n.useEffect(()=>{const l=()=>{c(window.innerWidth)};return window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}},[]),r},Q=({newProduct:r})=>{const[c,l]=n.useState(0),[v,j]=n.useState(!1),[C,u]=n.useState(4),[b,y]=n.useState(!1),[x,k]=n.useState(!1),N=async()=>{var s;const e=await P.get("/status");y(((s=e==null?void 0:e.data)==null?void 0:s.user)||!1),console.log("cek")};n.useEffect(()=>{N()},[x]),n.useEffect(()=>{const e=()=>k(!x);return window.addEventListener("productUpdated",e),()=>{window.removeEventListener("productUpdated",e)}},[]);const a=U();n.useEffect(()=>a>1100?u(5):a>1e3?u(4):a>700?u(2):a<500?u(1):()=>{},[a]);const[E,m]=R({loop:!0,mode:"free-snap",slides:{perView:C,spacing:5},slideChanged(e){l(e.track.details.rel)},created(){j(!0)}},[e=>{let s,i=!1;function d(){clearTimeout(s)}function o(){clearTimeout(s),!i&&(s=setTimeout(()=>{e.next()},5e3))}e.on("created",()=>{e.container.addEventListener("mouseover",()=>{i=!0,d()}),e.container.addEventListener("mouseout",()=>{i=!1,o()}),o()}),e.on("dragStarted",d),e.on("animationEnded",o),e.on("updated",o)}]);return t.jsxs("section",{className:"slider-container",children:[t.jsx("div",{ref:E,className:"h-fit flex overflow-hidden mx-5",children:r.map(e=>{var h,g;const{product_nm:s,price:i,sub_category:d,product_image:o}=e,p=((h=o.find(f=>f.position===1))==null?void 0:h.product_img)||((g=o[0])==null?void 0:g.product_img);return t.jsxs(T,{className:"md:w-[300px] w-[200px] keen-slider__slide flex flex-col gap-y-4 border-none shadow-none cursor-pointer z-10",onClick:()=>{S.visit(`/products/detail/${e.id}`)},children:[t.jsxs(B,{className:"relative flex flex-col items-center justify-center group overflow-hidden",style:{height:"200px"},children:[t.jsx("div",{className:"absolute inset-0 transition-transform duration-700 ease-in-out scale-100 group-hover:scale-125 z-0 bg-cover bg-center",style:{backgroundImage:`url(${p?`${_}/${p}`:"/images/no_image.png"})`}}),t.jsx(L,{onClick:f=>{f.stopPropagation(),F({productId:e.id,quantity:1,isLoggedIn:b})},type:"button",className:"bg-pink-500/80 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-50",children:"+ Keranjang"})]}),t.jsxs($,{className:"flex flex-col justify-start items-start p-0",children:[t.jsxs("h3",{className:"text-sm font-bold",children:[d.category.category_nm,"-",d.sub_category_nm]}),t.jsx("h3",{children:s}),t.jsx("h4",{className:"text-sm font-bold text-primary",children:z(i)})]})]},e.id)})}),v&&m.current&&t.jsxs(t.Fragment,{children:[t.jsx(w,{left:!0,onClick:e=>{var s;return e.stopPropagation()||((s=m.current)==null?void 0:s.prev())},disabled:c===0}),t.jsx(w,{onClick:e=>{var s;return e.stopPropagation()||((s=m.current)==null?void 0:s.next())},disabled:c===m.current.track.details.slides.length-1})]})]})};function w(r){return t.jsxs(t.Fragment,{children:[r.left&&t.jsx("div",{onClick:r.onClick,className:"absolute select-none top-1/2 left-0 z-10 cursor-pointer border-2 rounded-full p-2 shadow-2xl",children:t.jsx(W,{className:"text-xl"})}),!r.left&&t.jsx("div",{onClick:r.onClick,className:"absolute select-none top-1/2 right-0 z-10 cursor-pointer border-2 rounded-full p-2 shadow-2xl",children:t.jsx(I,{className:"text-xl"})})]})}export{Q as default};
